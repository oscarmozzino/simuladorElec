class ElectricalBoardSimulator{constructor(){this.mainBreaker=!1,this.differential=!1,this.motor1Breaker=!1,this.motor2Breaker=!1,this.lightsBreaker=!1,this.auxBreaker=!1,this.motor1Selector=!1,this.motor2Selector=!1,this.lightsSwitch=!1,this.auxSwitch=!1,this.motor1Contactor=!1,this.motor2Contactor=!1,this.motor1Running=!1,this.motor2Running=!1,this.lightsOn=!1,this.auxOn=!1,this.voltage=0,this.motor1Current=0,this.motor2Current=0,this.lightsCurrent=0,this.auxCurrent=0,this.leakageCurrent=0,this.currentFault=null,this.alarms=[],this.errorCode="--",this.score=0,this.correct=0,this.incorrect=0,this.difficulty=1,this.startTime=Date.now(),this.faults={main_breaker_trip:{name:"Disparo Interruptor Principal",errorCode:"E01",difficulty:1,cause:"Sobrecarga en el circuito principal",explanation:"El interruptor principal se dispara cuando la corriente total excede su capacidad nominal, protegiendo el sistema de sobrecalentamiento.",effects:{mainBreaker:!1,voltage:0},symptoms:{1:["Sistema sin energía","Interruptor principal disparado"],2:["Sistema sin energía","Interruptor principal disparado","Corriente total excedió límite"],3:["Sistema sin energía","Interruptor principal disparado","Corriente total: >50A","Voltaje: 0V"]}},differential_trip:{name:"Disparo Diferencial",errorCode:"E02",difficulty:2,cause:"Corriente de fuga a tierra detectada",explanation:"El diferencial detecta diferencia entre corriente de entrada y salida, indicando fuga a tierra que puede ser peligrosa.",effects:{differential:!1,leakageCurrent:35},symptoms:{1:["Diferencial disparado","Posible fuga a tierra"],2:["Diferencial disparado","Corriente de fuga detectada","Sistema sin energía"],3:["Diferencial disparado","Corriente de fuga: 35mA (límite: 30mA)","Posible contacto con tierra en algún circuito"]}},motor1_overload:{name:"Sobrecarga Motor 1",errorCode:"E03",difficulty:1,cause:"Motor 1 consumiendo corriente excesiva",explanation:"El motor consume más corriente de lo normal por carga mecánica excesiva, rodamientos defectuosos o problema eléctrico.",effects:{motor1Current:25,motor1Breaker:!1},symptoms:{1:["Motor 1 no funciona","Breaker Motor 1 disparado"],2:["Motor 1 no funciona","Breaker Motor 1 disparado","Corriente excesiva detectada"],3:["Motor 1 no funciona","Breaker Motor 1 disparado","Corriente Motor 1: 25A (límite: 20A)"]}},motor2_overload:{name:"Sobrecarga Motor 2",errorCode:"E04",difficulty:1,cause:"Motor 2 consumiendo corriente excesiva",explanation:"Similar a Motor 1, indica problema mecánico o eléctrico causando consumo excesivo.",effects:{motor2Current:22,motor2Breaker:!1},symptoms:{1:["Motor 2 no funciona","Breaker Motor 2 disparado"],2:["Motor 2 no funciona","Breaker Motor 2 disparado","Corriente excesiva"],3:["Motor 2 no funciona","Breaker Motor 2 disparado","Corriente Motor 2: 22A (límite: 20A)"]}},contactor1_fail:{name:"Falla Contactor 1",errorCode:"E05",difficulty:2,cause:"Contactor Motor 1 no cierra",explanation:"El contactor no cierra sus contactos por bobina quemada, contactos soldados o problema mecánico.",effects:{motor1Contactor:!1,motor1Running:!1},symptoms:{1:["Motor 1 no arranca","Selector activado pero motor no responde"],2:["Motor 1 no arranca","Contactor no cierra","Sin corriente en motor"],3:["Motor 1 no arranca","Contactor permanece abierto","Corriente Motor 1: 0A","Verificar bobina contactor"]}},contactor2_fail:{name:"Falla Contactor 2",errorCode:"E06",difficulty:2,cause:"Contactor Motor 2 no cierra",explanation:"Similar a Contactor 1, impide arranque del motor por falla en el contactor.",effects:{motor2Contactor:!1,motor2Running:!1},symptoms:{1:["Motor 2 no arranca","Selector activado pero motor no responde"],2:["Motor 2 no arranca","Contactor no cierra"],3:["Motor 2 no arranca","Contactor permanece abierto","Corriente Motor 2: 0A"]}},phase_loss:{name:"Pérdida de Fase",errorCode:"E07",difficulty:3,cause:"Una fase del suministro trifásico perdida",explanation:"Pérdida de una fase causa desbalance, motores no arrancan o funcionan con sobrecarga en fases restantes.",effects:{voltage:160,motor1Current:0,motor2Current:0},symptoms:{1:["Motores no arrancan","Voltaje bajo"],2:["Motores no arrancan","Voltaje irregular","Posible pérdida de fase"],3:["Motores no arrancan","Voltaje: 160V (debería ser 230V)","Verificar las tres fases del suministro"]}},ground_fault:{name:"Falla a Tierra",errorCode:"E08",difficulty:2,cause:"Contacto no deseado con tierra",explanation:"Algún conductor hace contacto con tierra, creando corriente de fuga que dispara el diferencial.",effects:{leakageCurrent:40,differential:!1},symptoms:{1:["Diferencial dispara repetidamente","Corriente de fuga alta"],2:["Diferencial dispara repetidamente","Fuga a tierra detectada","Sistema inestable"],3:["Diferencial dispara repetidamente","Corriente de fuga: 40mA","Verificar aislamiento de conductores"]}},short_circuit:{name:"Cortocircuito",errorCode:"E09",difficulty:3,cause:"Contacto directo entre fase y neutro",explanation:"Cortocircuito causa corriente extremadamente alta que dispara breakers instantáneamente para proteger el sistema.",effects:{mainBreaker:!1,voltage:0},symptoms:{1:["Sistema completamente apagado","Interruptor principal disparado"],2:["Sistema completamente apagado","Disparo instantáneo de protecciones","Posible cortocircuito"],3:["Sistema completamente apagado","Disparo instantáneo","Corriente de falla muy alta","Verificar conductores dañados"]}},voltage_drop:{name:"Caída de Tensión",errorCode:"E10",difficulty:2,cause:"Resistencia excesiva en conexiones",explanation:"Conexiones flojas o cables subdimensionados causan caída de tensión, reduciendo rendimiento de equipos.",effects:{voltage:200},symptoms:{1:["Equipos funcionan débilmente","Voltaje bajo"],2:["Equipos funcionan débilmente","Voltaje reducido","Motores con bajo torque"],3:["Equipos funcionan débilmente","Voltaje: 200V (nominal: 230V)","Verificar conexiones y calibre de cables"]}},loose_connection:{name:"Conexión Floja",errorCode:"E11",difficulty:1,cause:"Conexión eléctrica floja o suelta",explanation:"Conexión floja causa alta resistencia, calentamiento y operación intermitente del equipo.",effects:{voltage:210},symptoms:{1:["Operación intermitente","Voltaje inestable"],2:["Operación intermitente","Voltaje fluctuante","Posible conexión floja"],3:["Operación intermitente","Voltaje: 210V (inestable)","Verificar apriete de conexiones"]}},motor1_bearing:{name:"Rodamiento Motor 1 Defectuoso",errorCode:"E12",difficulty:2,cause:"Rodamiento de Motor 1 desgastado",explanation:"Rodamiento defectuoso causa fricción excesiva, aumentando corriente y generando ruido y vibración.",effects:{motor1Current:18},symptoms:{1:["Motor 1 con ruido anormal","Corriente elevada"],2:["Motor 1 con ruido y vibración","Corriente elevada","Posible problema mecánico"],3:["Motor 1 con ruido y vibración","Corriente Motor 1: 18A (normal: 15A)","Verificar rodamientos"]}}},this.init()}init(){this.getElements(),this.attachListeners(),this.startTimer(),this.update()}getElements(){this.mainBreakerBtn=document.getElementById("mainBreakerBtn"),this.differentialBtn=document.getElementById("differentialBtn"),this.motor1BreakerBtn=document.getElementById("motor1BreakerBtn"),this.motor2BreakerBtn=document.getElementById("motor2BreakerBtn"),this.lightsBreakerBtn=document.getElementById("lightsBreakerBtn"),this.auxBreakerBtn=document.getElementById("auxBreakerBtn"),this.motor1SelectorBtn=document.getElementById("motor1SelectorBtn"),this.motor2SelectorBtn=document.getElementById("motor2SelectorBtn"),this.lightsSwitchBtn=document.getElementById("lightsSwitchBtn"),this.auxSwitchBtn=document.getElementById("auxSwitchBtn"),this.voltmeter=document.getElementById("voltmeter"),this.ammeter=document.getElementById("ammeter"),this.powermeter=document.getElementById("powermeter"),this.motor1CurrentDisplay=document.getElementById("motor1Current"),this.motor2CurrentDisplay=document.getElementById("motor2Current"),this.lightsCurrentDisplay=document.getElementById("lightsCurrent"),this.auxCurrentDisplay=document.getElementById("auxCurrent"),this.leakageCurrentDisplay=document.getElementById("leakageCurrent"),this.motor1ContactorStatus=document.getElementById("motor1ContactorStatus"),this.motor2ContactorStatus=document.getElementById("motor2ContactorStatus"),this.motor1Status=document.getElementById("motor1Status"),this.motor2Status=document.getElementById("motor2Status"),this.lightsStatus=document.getElementById("lightsStatus"),this.auxStatus=document.getElementById("auxStatus"),this.alarmDisplay=document.getElementById("alarmDisplay"),this.errorCodeDisplay=document.getElementById("errorCode"),this.difficultySelect=document.getElementById("difficultySelect"),this.diagnosisSelect=document.getElementById("diagnosisSelect"),this.submitDiagnosisBtn=document.getElementById("submitDiagnosis"),this.diagnosisResult=document.getElementById("diagnosisResult"),this.faultHint=document.getElementById("faultHint"),this.scoreDisplay=document.getElementById("score"),this.correctDisplay=document.getElementById("correct"),this.incorrectDisplay=document.getElementById("incorrect"),this.timerDisplay=document.getElementById("timer"),this.currentDifficultyDisplay=document.getElementById("currentDifficulty"),this.injectFaultBtn=document.getElementById("injectFault"),this.resetSystemBtn=document.getElementById("resetSystem")}attachListeners(){this.mainBreakerBtn.addEventListener("click",()=>this.toggleBreaker("main")),this.differentialBtn.addEventListener("click",()=>this.toggleBreaker("differential")),this.motor1BreakerBtn.addEventListener("click",()=>this.toggleBreaker("motor1")),this.motor2BreakerBtn.addEventListener("click",()=>this.toggleBreaker("motor2")),this.lightsBreakerBtn.addEventListener("click",()=>this.toggleBreaker("lights")),this.auxBreakerBtn.addEventListener("click",()=>this.toggleBreaker("aux")),this.motor1SelectorBtn.addEventListener("click",()=>this.toggleSwitch("motor1")),this.motor2SelectorBtn.addEventListener("click",()=>this.toggleSwitch("motor2")),this.lightsSwitchBtn.addEventListener("click",()=>this.toggleSwitch("lights")),this.auxSwitchBtn.addEventListener("click",()=>this.toggleSwitch("aux")),this.difficultySelect.addEventListener("change",e=>this.changeDifficulty(parseInt(e.target.value))),this.submitDiagnosisBtn.addEventListener("click",()=>this.submitDiagnosis()),this.injectFaultBtn.addEventListener("click",()=>this.injectRandomFault()),this.resetSystemBtn.addEventListener("click",()=>this.resetSystem())}toggleBreaker(t){if(this.currentFault){const e=this.faults[this.currentFault];if(e.effects[t+"Breaker"]===!1)return void alert("Este breaker está disparado por una falla. Diagnostique el problema primero.")}"main"===t?(this.mainBreaker=!this.mainBreaker,this.mainBreakerBtn.textContent=this.mainBreaker?"ON":"OFF",this.mainBreakerBtn.classList.toggle("active"),this.mainBreaker||(this.differential=!1,this.motor1Breaker=!1,this.motor2Breaker=!1,this.lightsBreaker=!1,this.auxBreaker=!1,this.differentialBtn.textContent="OFF",this.differentialBtn.classList.remove("active"),this.motor1BreakerBtn.textContent="OFF",this.motor1BreakerBtn.classList.remove("active"),this.motor2BreakerBtn.textContent="OFF",this.motor2BreakerBtn.classList.remove("active"),this.lightsBreakerBtn.textContent="OFF",this.lightsBreakerBtn.classList.remove("active"),this.auxBreakerBtn.textContent="OFF",this.auxBreakerBtn.classList.remove("active"))):"differential"===t?(this.mainBreaker?(this.differential=!this.differential,this.differentialBtn.textContent=this.differential?"ON":"OFF",this.differentialBtn.classList.toggle("active"),this.differential||(this.motor1Breaker=!1,this.motor2Breaker=!1,this.lightsBreaker=!1,this.auxBreaker=!1,this.motor1BreakerBtn.textContent="OFF",this.motor1BreakerBtn.classList.remove("active"),this.motor2BreakerBtn.textContent="OFF",this.motor2BreakerBtn.classList.remove("active"),this.lightsBreakerBtn.textContent="OFF",this.lightsBreakerBtn.classList.remove("active"),this.auxBreakerBtn.textContent="OFF",this.auxBreakerBtn.classList.remove("active"))):alert("Encienda el interruptor principal primero")):"motor1"===t?this.mainBreaker&&this.differential?(this.motor1Breaker=!this.motor1Breaker,this.motor1BreakerBtn.textContent=this.motor1Breaker?"ON":"OFF",this.motor1BreakerBtn.classList.toggle("active")):alert("Encienda interruptor principal y diferencial primero"):"motor2"===t?this.mainBreaker&&this.differential?(this.motor2Breaker=!this.motor2Breaker,this.motor2BreakerBtn.textContent=this.motor2Breaker?"ON":"OFF",this.motor2BreakerBtn.classList.toggle("active")):alert("Encienda interruptor principal y diferencial primero"):"lights"===t?this.mainBreaker&&this.differential?(this.lightsBreaker=!this.lightsBreaker,this.lightsBreakerBtn.textContent=this.lightsBreaker?"ON":"OFF",this.lightsBreakerBtn.classList.toggle("active")):alert("Encienda interruptor principal y diferencial primero"):"aux"===t&&(this.mainBreaker&&this.differential?(this.auxBreaker=!this.auxBreaker,this.auxBreakerBtn.textContent=this.auxBreaker?"ON":"OFF",this.auxBreakerBtn.classList.toggle("active")):alert("Encienda interruptor principal y diferencial primero")),this.updateSystem(),this.update()}toggleSwitch(t){"motor1"===t?(this.motor1Selector=!this.motor1Selector,this.motor1SelectorBtn.textContent=this.motor1Selector?"ON":"OFF",this.motor1SelectorBtn.classList.toggle("active")):"motor2"===t?(this.motor2Selector=!this.motor2Selector,this.motor2SelectorBtn.textContent=this.motor2Selector?"ON":"OFF",this.motor2SelectorBtn.classList.toggle("active")):"lights"===t?(this.lightsSwitch=!this.lightsSwitch,this.lightsSwitchBtn.textContent=this.lightsSwitch?"ON":"OFF",this.lightsSwitchBtn.classList.toggle("active")):"aux"===t&&(this.auxSwitch=!this.auxSwitch,this.auxSwitchBtn.textContent=this.auxSwitch?"ON":"OFF",this.auxSwitchBtn.classList.toggle("active")),this.updateSystem(),this.update()}updateSystem(){if(this.voltage=this.mainBreaker&&this.differential?230:0,this.currentFault){const t=this.faults[this.currentFault];void 0!==t.effects.voltage&&(this.voltage=t.effects.voltage),t.effects.mainBreaker===!1&&(this.mainBreaker=!1,this.mainBreakerBtn.textContent="OFF",this.mainBreakerBtn.classList.remove("active")),t.effects.differential===!1&&(this.differential=!1,this.differentialBtn.textContent="OFF",this.differentialBtn.classList.remove("active")),t.effects.motor1Breaker===!1&&(this.motor1Breaker=!1,this.motor1BreakerBtn.textContent="OFF",this.motor1BreakerBtn.classList.remove("active")),t.effects.motor2Breaker===!1&&(this.motor2Breaker=!1,this.motor2BreakerBtn.textContent="OFF",this.motor2BreakerBtn.classList.remove("active"))}if(this.motor1Contactor=this.motor1Breaker&&this.motor1Selector,this.motor2Contactor=this.motor2Breaker&&this.motor2Selector,this.currentFault){const t=this.faults[this.currentFault];t.effects.motor1Contactor===!1&&(this.motor1Contactor=!1),t.effects.motor2Contactor===!1&&(this.motor2Contactor=!1)}if(this.motor1Running=this.motor1Contactor&&this.voltage>0,this.motor2Running=this.motor2Contactor&&this.voltage>0,this.lightsOn=this.lightsBreaker&&this.lightsSwitch&&this.voltage>0,this.auxOn=this.auxBreaker&&this.auxSwitch&&this.voltage>0,this.motor1Current=this.motor1Running?15:0,this.motor2Current=this.motor2Running?12:0,this.lightsCurrent=this.lightsOn?3:0,this.auxCurrent=this.auxOn?5:0,this.leakageCurrent=0,this.currentFault){const t=this.faults[this.currentFault];void 0!==t.effects.motor1Current&&(this.motor1Current=t.effects.motor1Current),void 0!==t.effects.motor2Current&&(this.motor2Current=t.effects.motor2Current),void 0!==t.effects.leakageCurrent&&(this.leakageCurrent=t.effects.leakageCurrent),this.motor1Current>20&&(this.motor1Breaker=!1,this.motor1BreakerBtn.textContent="OFF",this.motor1BreakerBtn.classList.remove("active"),this.motor1Running=!1),this.motor2Current>20&&(this.motor2Breaker=!1,this.motor2BreakerBtn.textContent="OFF",this.motor2BreakerBtn.classList.remove("active"),this.motor2Running=!1),this.leakageCurrent>30&&(this.differential=!1,this.differentialBtn.textContent="OFF",this.differentialBtn.classList.remove("active"))}}changeDifficulty(t){this.difficulty=t;const e=["Nivel 1 - Básico","Nivel 2 - Intermedio","Nivel 3 - Avanzado"];this.currentDifficultyDisplay.textContent=e[t-1],this.currentFault&&this.updateAlarms()}injectRandomFault(){if(!this.mainBreaker)return void alert("Encienda el interruptor principal primero");const t=Object.keys(this.faults).filter(t=>this.faults[t].difficulty<=this.difficulty),e=t[Math.floor(Math.random()*t.length)];this.injectFault(e)}injectFault(t){if(!this.mainBreaker)return void alert("Encienda el interruptor principal primero");this.currentFault=t;const e=this.faults[t];this.errorCode=e.errorCode,this.updateAlarms(),this.updateSystem(),this.update(),this.diagnosisResult.textContent="",this.diagnosisResult.className="diagnosis-result",this.showHint()}updateAlarms(){const t=this.faults[this.currentFault];this.alarms=t.symptoms[this.difficulty]}showHint(){const t=this.faults[this.currentFault];this.faultHint.style.display="block",1===this.difficulty?this.faultHint.innerHTML=`<strong>💡 Pista:</strong> ${t.cause}`:2===this.difficulty?this.faultHint.innerHTML="<strong>💡 Pista:</strong> Analice las lecturas de corriente y voltaje para identificar el problema.":this.faultHint.innerHTML="<strong>🎯 Modo Experto:</strong> Analice todos los síntomas y parámetros del sistema."}submitDiagnosis(){const t=this.diagnosisSelect.value;if(!t)return void alert("Seleccione un diagnóstico primero");if(!this.currentFault)return this.diagnosisResult.textContent="⚠️ No hay falla activa",void(this.diagnosisResult.className="diagnosis-result");if(t===this.currentFault){this.correct++;const t=100*this.difficulty;this.score+=t,this.diagnosisResult.textContent=`✅ CORRECTO! +${t} puntos`,this.diagnosisResult.className="diagnosis-result correct";const e=this.faults[this.currentFault];this.faultHint.innerHTML=`<strong>📚 Explicación:</strong> ${e.explanation}`,this.faultHint.style.display="block",setTimeout(()=>this.clearFault(),5e3)}else{this.incorrect++,this.score=Math.max(0,this.score-25);const t=this.faults[this.currentFault].name;this.diagnosisResult.textContent=`❌ INCORRECTO. La falla es: ${t}`,this.diagnosisResult.className="diagnosis-result incorrect";const e=this.faults[this.currentFault];this.faultHint.innerHTML=`<strong>📚 Explicación:</strong> ${e.explanation}`,this.faultHint.style.display="block"}this.update()}clearFault(){this.currentFault=null,this.alarms=[],this.errorCode="--",this.diagnosisResult.textContent="",this.diagnosisResult.className="diagnosis-result",this.faultHint.innerHTML="",this.faultHint.style.display="none",this.diagnosisSelect.value="",this.updateSystem(),this.update()}resetSystem(){confirm("¿Reiniciar sistema? Borrará puntuación.")&&(this.mainBreaker=!1,this.differential=!1,this.motor1Breaker=!1,this.motor2Breaker=!1,this.lightsBreaker=!1,this.auxBreaker=!1,this.motor1Selector=!1,this.motor2Selector=!1,this.lightsSwitch=!1,this.auxSwitch=!1,this.currentFault=null,this.alarms=[],this.errorCode="--",this.score=0,this.correct=0,this.incorrect=0,this.difficulty=1,this.startTime=Date.now(),this.mainBreakerBtn.textContent="OFF",this.mainBreakerBtn.classList.remove("active"),this.differentialBtn.textContent="OFF",this.differentialBtn.classList.remove("active"),this.motor1BreakerBtn.textContent="OFF",this.motor1BreakerBtn.classList.remove("active"),this.motor2BreakerBtn.textContent="OFF",this.motor2BreakerBtn.classList.remove("active"),this.lightsBreakerBtn.textContent="OFF",this.lightsBreakerBtn.classList.remove("active"),this.auxBreakerBtn.textContent="OFF",this.auxBreakerBtn.classList.remove("active"),this.motor1SelectorBtn.textContent="OFF",this.motor1SelectorBtn.classList.remove("active"),this.motor2SelectorBtn.textContent="OFF",this.motor2SelectorBtn.classList.remove("active"),this.lightsSwitchBtn.textContent="OFF",this.lightsSwitchBtn.classList.remove("active"),this.auxSwitchBtn.textContent="OFF",this.auxSwitchBtn.classList.remove("active"),this.diagnosisResult.textContent="",this.faultHint.innerHTML="",this.faultHint.style.display="none",this.diagnosisSelect.value="",this.difficultySelect.value="1",this.currentDifficultyDisplay.textContent="Nivel 1 - Básico",this.updateSystem(),this.update())}startTimer(){this.timerInterval=setInterval(()=>{const t=Math.floor((Date.now()-this.startTime)/1e3),e=Math.floor(t/60),r=t%60;this.timerDisplay.textContent=`${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}`},1e3)}update(){this.voltmeter.textContent=`${this.voltage} V`,this.ammeter.textContent=`${(this.motor1Current+this.motor2Current+this.lightsCurrent+this.auxCurrent).toFixed(1)} A`,this.powermeter.textContent=`${Math.round(this.voltage*(this.motor1Current+this.motor2Current+this.lightsCurrent+this.auxCurrent))} W`,this.motor1CurrentDisplay.textContent=`${this.motor1Current.toFixed(1)} A`,this.motor2CurrentDisplay.textContent=`${this.motor2Current.toFixed(1)} A`,this.lightsCurrentDisplay.textContent=`${this.lightsCurrent.toFixed(1)} A`,this.auxCurrentDisplay.textContent=`${this.auxCurrent.toFixed(1)} A`,this.leakageCurrentDisplay.textContent=`${this.leakageCurrent} mA`,this.motor1ContactorStatus.textContent=this.motor1Contactor?"Cerrado":"Abierto",this.motor2ContactorStatus.textContent=this.motor2Contactor?"Cerrado":"Abierto",this.motor1Status.textContent=this.motor1Running?"FUNCIONANDO":"APAGADO",this.motor2Status.textContent=this.motor2Running?"FUNCIONANDO":"APAGADO",this.lightsStatus.textContent=this.lightsOn?"ENCENDIDO":"APAGADO",this.auxStatus.textContent=this.auxOn?"ENCENDIDO":"APAGADO",this.alarms.length>0?this.alarmDisplay.innerHTML=this.alarms.map(t=>`<div class="alarm-item">⚠️ ${t}</div>`).join(""):this.alarmDisplay.innerHTML='<p class="no-alarm">✓ Sistema Normal</p>',this.errorCodeDisplay.textContent=this.errorCode,this.scoreDisplay.textContent=this.score,this.correctDisplay.textContent=this.correct,this.incorrectDisplay.textContent=this.incorrect,this.updateDiagram()}updateDiagram(){const t=document.getElementById("supply-indicator"),e=document.getElementById("supply-voltage");t.className=this.mainBreaker?"status-indicator active":"status-indicator inactive",e.textContent=`${this.voltage}V`;const r=document.getElementById("main-breaker-indicator"),s=document.getElementById("main-breaker-status");r.className=this.mainBreaker?"status-indicator active":"status-indicator inactive",s.textContent=this.mainBreaker?"ON":"OFF";const i=document.getElementById("differential-indicator"),a=document.getElementById("differential-status"),n=document.getElementById("diff-leakage");i.className=this.differential?"status-indicator active":"status-indicator inactive",a.textContent=this.differential?"ON":"OFF",n.textContent=`${this.leakageCurrent}mA`;const o=document.getElementById("motor1-breaker-indicator"),l=document.getElementById("motor1-breaker-status");o.className=this.motor1Breaker?"status-indicator active":"status-indicator inactive",l.textContent=this.motor1Breaker?"ON":"OFF";const c=document.getElementById("motor1-contactor-indicator"),u=document.getElementById("motor1-contactor-diagram");c.className=this.motor1Contactor?"status-indicator active":"status-indicator inactive",u.textContent=this.motor1Contactor?"Cerrado":"Abierto";const d=document.getElementById("motor1-indicator"),h=document.getElementById("motor1-diagram-status"),m=document.getElementById("motor1-diagram-current");d.className=this.motor1Running?"status-indicator active":"status-indicator inactive",h.textContent=this.motor1Running?"FUNCIONANDO":"APAGADO",m.textContent=`${this.motor1Current.toFixed(1)}A`;const p=document.getElementById("motor2-breaker-indicator"),g=document.getElementById("motor2-breaker-status");p.className=this.motor2Breaker?"status-indicator active":"status-indicator inactive",g.textContent=this.motor2Breaker?"ON":"OFF";const f=document.getElementById("motor2-contactor-indicator"),y=document.getElementById("motor2-contactor-diagram");f.className=this.motor2Contactor?"status-indicator active":"status-indicator inactive",y.textContent=this.motor2Contactor?"Cerrado":"Abierto";const C=document.getElementById("motor2-indicator"),v=document.getElementById("motor2-diagram-status"),S=document.getElementById("motor2-diagram-current");C.className=this.motor2Running?"status-indicator active":"status-indicator inactive",v.textContent=this.motor2Running?"FUNCIONANDO":"APAGADO",S.textContent=`${this.motor2Current.toFixed(1)}A`;const b=document.getElementById("lights-breaker-indicator"),I=document.getElementById("lights-breaker-status");b.className=this.lightsBreaker?"status-indicator active":"status-indicator inactive",I.textContent=this.lightsBreaker?"ON":"OFF";const x=document.getElementById("lights-indicator"),B=document.getElementById("lights-diagram-status"),D=document.getElementById("lights-diagram-current");x.className=this.lightsOn?"status-indicator active":"status-indicator inactive",B.textContent=this.lightsOn?"ENCENDIDO":"APAGADO",D.textContent=`${this.lightsCurrent.toFixed(1)}A`;const A=document.getElementById("aux-breaker-indicator"),E=document.getElementById("aux-breaker-status");A.className=this.auxBreaker?"status-indicator active":"status-indicator inactive",E.textContent=this.auxBreaker?"ON":"OFF";const k=document.getElementById("aux-indicator"),w=document.getElementById("aux-diagram-status"),F=document.getElementById("aux-diagram-current");k.className=this.auxOn?"status-indicator active":"status-indicator inactive",w.textContent=this.auxOn?"ENCENDIDO":"APAGADO",F.textContent=`${this.auxCurrent.toFixed(1)}A`}}window.addEventListener("DOMContentLoaded",()=>{new ElectricalBoardSimulator});
